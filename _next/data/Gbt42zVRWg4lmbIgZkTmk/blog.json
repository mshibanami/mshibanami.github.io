{"pageProps":{"allItems":[{"id":"reddit-shadowbanned","contentHtml":"<p><strong>TL;DR</strong>: I submitted a post to r/MacApps, then my Reddit account (<a href=\"https://www.reddit.com/user/mshibanami/\">u/mshibanami</a>) was locked. Roughly 10 hours later, my account was shifted to a shadowbanned state. Due to this status, all my posts were automatically filtered out. I have waited for 3 months now, but Reddit didn't take any more actions. So I gave up this account.</p>\n<h2>Summary</h2>\n<p>In August 2025, I released a new version of my app called <a href=\"https://mshibanami.github.io/redirect-web/\">Redirect Web</a>, and posted it in <a href=\"https://www.reddit.com/r/macapps/\">r/macapps</a> as a self-promotion since it was allowed according to their rules. After that, my account was locked by Reddit, and all my posts were automatically hidden.</p>\n<p>I wrote this article to document what happened, ensuring transparency regarding myself and my work. I hope this record helps others who encounter the same issue, even though I was unable to resolve it myself.</p>\n<h2>Posts affected</h2>\n<p>All of my comments, and my posts (which were just the following two):</p>\n<ul>\n<li>[Aug 2025] <a href=\"https://www.reddit.com/r/macapps/comments/1mzpxlk/\">[Big Update] Redirect Web 8 - now supports multiple browsers, not just Safari!</a></li>\n<li>[Aug 2024] <a href=\"https://www.reddit.com/r/macapps/comments/1ejqelt/\">I made a Safari extension for macOS &#x26; iOS called Redirect Web, which allows you to redirect any web page to another</a></li>\n</ul>\n<h2>Timeline</h2>\n<ul>\n<li><strong>25 Aug at 1:04 AM (UTC)</strong>\n<ul>\n<li>I posted on <a href=\"https://www.reddit.com/r/macapps/\">r/MacApps</a> for announcing <a href=\"https://mshibanami.github.io/redirect-web/release-notes/8.0.0\">Redirect Web's update</a>, and I was replying to the Redditors until my account was locked.</li>\n</ul>\n</li>\n<li><strong>25 Aug at 7:21 PM (UTC)</strong>\n<ul>\n<li>My account was locked by Reddit.</li>\n<li>All of my posts were also removed with this message: <code>Sorry, this post was removed by Reddit’s filters.</code></li>\n<li>I received the account lock email and reset my password as instructed, but my account remained restricted.</li>\n<li>I sent an appeal to Reddit via <a href=\"https://www.reddit.com/appeals\">https://www.reddit.com/appeals</a>.</li>\n</ul>\n</li>\n<li><strong>~10 hours later</strong>\n<ul>\n<li>My account was <strong>placed under a shadowban</strong> by Reddit,\n<ul>\n<li>At this time, I mistakenly thought it had been fully reinstated.</li>\n</ul>\n</li>\n<li>My posts still didn't appear publicly, so I sent a message to r/MacApps mods through <a href=\"https://www.reddit.com/message/compose?to=r/macapps\">Modmail</a> to restore them.</li>\n</ul>\n</li>\n<li><strong>26 Aug at 8:58PM (UTC)</strong>\n<ul>\n<li>r/MacApps Mod Team <a href=\"https://www.reddit.com/r/macapps/comments/1mzpxlk/comment/nau0ur1/\">posted</a> a comment: \"Poster's account suspended by Reddit.\"</li>\n<li>The error message <code>Sorry, this post was removed by Reddit’s filters.</code> was also replaced with <code>Sorry, this post has been removed by the moderators of r/macapps.</code></li>\n</ul>\n</li>\n<li><strong>27 Aug</strong>\n<ul>\n<li>I contacted mods via Modmail again, and they replied to me that they couldn't restore my posts because I'm shadowbanned.</li>\n</ul>\n</li>\n<li><strong>30 Nov</strong>\n<ul>\n<li>I confirmed my account is still shadowbanned. I gave up my account.</li>\n</ul>\n</li>\n</ul>\n<h2>Why did Reddit do it?</h2>\n<p>I'm not too sure, but I assume these could have triggered Reddit filters:</p>\n<ul>\n<li>The last activity of my account was <a href=\"https://www.reddit.com/r/Safari/comments/1jp5scj/comment/mkxlbuw/\">5 months ago</a>, and I suddenly posted a self-promotion post and actively replied to other users.</li>\n<li>I was using NordVPN. (Australian server, where I also live.)</li>\n<li>I was accessing Reddit using Firefox Nightly without any extensions.</li>\n<li>I was on Reddit overnight.</li>\n</ul>\n<h2>Impact</h2>\n<p>Since my account was shadowbanned, other users can no longer read my posts. They are also gone from Google Search, which is a major loss in acquiring new users.</p>\n<ul>\n<li><a href=\"https://www.reddit.com/r/macapps/comments/1ejqelt/\">My older post</a> still has its title and my replies to other comments since its status is still <code>Sorry, this post was removed by Reddit’s filters.</code>.</li>\n<li><a href=\"https://www.reddit.com/r/macapps/comments/1mzpxlk/\">My newer post</a>'s title is <em>[ Removed by moderator ]</em> and all my comments are hidden for other users, not even showing <em>Comment removed by moderator.</em> It's completely invisible for other users while I can still see it using my u/mshibanami account.</li>\n</ul>\n<h2>Could mods have restored the post?</h2>\n<p>I don't think so, although I'm not 100% sure.</p>\n<p>After reading <a href=\"https://support.reddithelp.com/hc/en-us/articles/15484365010196-Mod-Mode\">Reddit's documentation</a>, I thought mods should have been able to approve my post manually. In fact, when they <a href=\"https://www.reddit.com/r/macapps/comments/1mzpxlk/comment/nau0ur1/\">posted a comment</a>, the status of my post was also changed to \"Sorry, this post has been removed by the moderators of r/MacApps.\" from \"<br>\nSorry, this post was removed by Reddit’s filters.\" However, since my account was shadownbanned, they probably couldn't do it. At least that's what they explained to me via Modmail.</p>\n<p>However, I have no experience as a mod and I couldn't find any official documentation about this specific situation. If you have more information, please let me know.</p>\n<h2>Appendix</h2>\n<h3>Email from Reddit (<code>noreply@redditmail.com</code>)</h3>\n<blockquote>\n<p>Hi u/mshibanami,</p>\n<p>At Reddit, we're always watching out for your privacy, safety, and security. Recently, after detecting some technical irregularities on your u/mshibanami account, we took the extra precaution of locking your account.</p>\n<p>To unlock your account, reset your password now.</p>\n<p>We recommend choosing a new password that you haven't used on Reddit or another website or app before.</p>\n<p>To prevent your account from potential misuse, you won't be able to take part in communities or update the majority of your settings while your account is locked. Also, when you log in you'll see a red warning and a security message like this one asking you to reset your password.</p>\n</blockquote>\n<h3>Reply from r/MacApps Mod Team via Modmail</h3>\n<blockquote>\n<p>r/macapps MOD 2:03 AM\nThanks for reaching out</p>\n<p>• Your account appears to have been suspended: Your account is site-wide shadow banned.</p>\n<p>• This means that only mods of individual subreddits can see your content. You need to contact the admins to get it sorted out.</p>\n<p>• Appeals can be made here: <a href=\"https://www.reddit.com/appeals\">https://www.reddit.com/appeals</a></p>\n</blockquote>\n<blockquote>\n<p>Your account is still suspended. Sorry</p>\n</blockquote>\n","textFormat":0,"sourceFileAbsolutePath":"/home/runner/work/website/website/blog/reddit-shadowbanned.md","outputPath":"blog/reddit-shadowbanned","title":"My Reddit account was locked, and then shadowbanned.","createdAt":"2025-11-30","language":"en"},{"id":"subscriptions-insert-error","contentHtml":"<p>Today I noticed that the <a href=\"https://developers.google.com/youtube/v3/docs/subscriptions/insert\">subscriptions:insert</a> method of YouTube Data API V3 returns this error:</p>\n<div><pre><code class=\"language-json\"><span>{</span>\n <span>\"error\"</span><span>:</span> <span>{</span>\n  <span>\"errors\"</span><span>:</span> <span>[</span>\n   <span>{</span>\n    <span>\"domain\"</span><span>:</span> <span>\"youtube.subscription\"</span><span>,</span>\n    <span>\"reason\"</span><span>:</span> <span>\"publisherNotFound\"</span><span>,</span>\n    <span>\"message\"</span><span>:</span> <span>\"The resource specified by the requests &#x3C;code>snippet.resourceId&#x3C;/code> property cannot be found.\"</span>\n   <span>}</span>\n  <span>]</span><span>,</span>\n  <span>\"code\"</span><span>:</span> <span>404</span><span>,</span>\n  <span>\"message\"</span><span>:</span> <span>\"The resource specified by the requests &#x3C;code>snippet.resourceId&#x3C;/code> property cannot be found.\"</span>\n <span>}</span>\n<span>}</span>\n</code></pre></div>\n<p>This is the request body that I sent:</p>\n<div><pre><code class=\"language-json\"><span>{</span>\n <span>\"snippet\"</span><span>:</span> <span>{</span>\n  <span>\"resourceId\"</span><span>:</span> <span>{</span>\n   <span>\"channelId\"</span><span>:</span> <span>\"UCa90xqK2odw1KV5wHU9WRhg\"</span>\n  <span>}</span>\n <span>}</span>\n<span>}</span>\n</code></pre></div>\n<p>The above request was valid before. But now, it seems that we need a <code>kind</code>\nproperty for <code>snippet.resourceId</code> see below:</p>\n<div><pre><code class=\"language-json\"><span>{</span>\n <span>\"snippet\"</span><span>:</span> <span>{</span>\n  <span>\"resourceId\"</span><span>:</span> <span>{</span>\n   <span>\"channelId\"</span><span>:</span> <span>\"UCa90xqK2odw1KV5wHU9WRhg\"</span><span>,</span>\n   <span>\"kind\"</span><span>:</span> <span>\"youtube#channel\"</span>\n  <span>}</span>\n <span>}</span>\n<span>}</span>\n</code></pre></div>\n<p>It would appear that subscribing to channels without this step\nis regarded as an invalid request.</p>\n","textFormat":0,"sourceFileAbsolutePath":"/home/runner/work/website/website/blog/subscriptions-insert-error.md","outputPath":"blog/subscriptions-insert-error","title":"\"subscriptions:insert\" returns an error","createdAt":"2018-08-23","language":"en"},{"id":"unit-prefixes-by-languages","contentHtml":"<p>先日作った動画プレイヤーアプリには、動画の高評価数・低評価数を表示する機能がある。その評価数は、以下のように適切な単位で表示されるようにしている。</p>\n<p><img src=\"/images/randomtube-unit-prefix.jpg\" alt=\"prefix\"></p>\n<p>これはYouTubeの公式アプリに倣ったものだ。</p>\n<p>日本語の場合は、千・万・億・京のいずれかを使うことにしているが、他言語の場合はどうなるのかを示す資料が無かった。</p>\n<p>なので前にこんな表を作った。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">English (en)</th>\n<th align=\"left\">Spanish (es)</th>\n<th align=\"left\">French (fr)</th>\n<th align=\"left\">German (de)</th>\n<th align=\"left\">Dutch (nl)</th>\n<th align=\"left\">Polish (pl)</th>\n<th align=\"left\">Italian (it)</th>\n<th align=\"left\">Japanese (ja)</th>\n<th align=\"left\">Chinese (Simplified) (zh-hans)</th>\n<th align=\"left\">Chinese (Traditional) (zh-hant)</th>\n<th align=\"left\">Korean (kr)</th>\n<th align=\"left\">Vietnamese (vi)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><strong>100</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>101</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>102</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>103</strong></td>\n<td align=\"left\">K</td>\n<td align=\"left\">K</td>\n<td align=\"left\">k</td>\n<td align=\"left\">Tsd.</td>\n<td align=\"left\">k</td>\n<td align=\"left\">tys.</td>\n<td align=\"left\">?</td>\n<td align=\"left\">千</td>\n<td align=\"left\">千</td>\n<td align=\"left\">千</td>\n<td align=\"left\">천</td>\n<td align=\"left\">N</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>104</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">万</td>\n<td align=\"left\">万</td>\n<td align=\"left\">万</td>\n<td align=\"left\">만</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>105</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>106</strong></td>\n<td align=\"left\">M</td>\n<td align=\"left\">M</td>\n<td align=\"left\">M</td>\n<td align=\"left\">Mio.</td>\n<td align=\"left\">mln.</td>\n<td align=\"left\">mln</td>\n<td align=\"left\">Mln</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">Tr</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>107</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>108</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">億</td>\n<td align=\"left\">亿</td>\n<td align=\"left\">億</td>\n<td align=\"left\">억</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>109</strong></td>\n<td align=\"left\">G</td>\n<td align=\"left\">G</td>\n<td align=\"left\">G</td>\n<td align=\"left\">Mrd.</td>\n<td align=\"left\">?</td>\n<td align=\"left\">?</td>\n<td align=\"left\">なし</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">Tỷ</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>1010</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>1011</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>1012</strong></td>\n<td align=\"left\">T</td>\n<td align=\"left\">T</td>\n<td align=\"left\">T</td>\n<td align=\"left\">Bio.</td>\n<td align=\"left\">?</td>\n<td align=\"left\">?</td>\n<td align=\"left\">なし</td>\n<td align=\"left\">兆</td>\n<td align=\"left\">万亿</td>\n<td align=\"left\">萬億  兆</td>\n<td align=\"left\">조</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>1013</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>1014</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>1015</strong></td>\n<td align=\"left\">P</td>\n<td align=\"left\">P</td>\n<td align=\"left\">P</td>\n<td align=\"left\">Brd.</td>\n<td align=\"left\">?</td>\n<td align=\"left\">?</td>\n<td align=\"left\">なし</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><strong>1016</strong></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">京</td>\n<td align=\"left\">万万亿 (または亿亿)</td>\n<td align=\"left\">萬萬億 (または億億)  京(台湾のみ)</td>\n<td align=\"left\">경</td>\n<td align=\"left\"></td>\n</tr>\n</tbody>\n</table>\n<p>その時のメモ書き。</p>\n<ul>\n<li>short scale: Tsd, Mln, Bln, Tln</li>\n<li>long scale: Tsd, Mln, Mrd, Bln</li>\n<li>国によってshort scale、long scale共に使われており、そういうところではKやMなどのSI接頭辞を使うっぽい</li>\n<li>イタリア語は10^9以降が色々解釈出来てしまうので使わないらしい</li>\n<li>韓国語は억以外の数値単位は使ってない？</li>\n<li>オランダ語はSI接頭辞とlong scaleが混ざってる？</li>\n</ul>\n<p>ソースを残してなかったので信ぴょう性が薄い。また、地域差もほとんど考慮してないので色々抜けのある資料だ。</p>\n","textFormat":0,"sourceFileAbsolutePath":"/home/runner/work/website/website/blog/unit-prefixes-by-languages.md","outputPath":"blog/unit-prefixes-by-languages","title":"言語別の数値単位表","createdAt":"2016-02-07"},{"id":"gradle-wrapper","contentHtml":"<p>Gradleでは基本的にGradleラッパーを介してプログラムが実行される。\nしかしこのラッパーはメモリを20MBほど消費し、CPUにも多少負荷をかけている。\nその為、直接プログラムを実行したい。</p>\n<p><code>build.gradle</code>に下記を書く。</p>\n<div><pre><code class=\"language-groovy\">apply plugin<span>:</span><span>'application'</span>\nmainClassName <span>=</span> <span><span>\"org.gradle.sample.Main\"</span></span>\n</code></pre></div>\n<p><code>org.gradle.sample.Main</code>には、mainメソッドが存在するクラスを指定する。</p>\n<p>そして次のコマンドを実行する。</p>\n<div><pre><code class=\"language-zsh\">% gradle clean installDist</code></pre></div>\n<p>すると<code>build/install/&#x3C;プログラム名>/bin/&#x3C;プログラム名></code> というファイルが作られるのでそれを実行する。</p>\n<p>ここで次のような例外が出た。</p>\n<blockquote>\n<p>Exception in thread \"main\" java.lang.ExceptionInInitializerError\nCaused by: java.lang.NullPointerException</p>\n</blockquote>\n<p>今までrunなどのGradleのタスクから実行していた時には出なかった例外だ。</p>\n<p>例外が発生しているのは以下のコード。</p>\n<div><pre><code class=\"language-java\"><span>URL</span> dirUrl <span>=</span> <span>WordReader</span><span>.</span><span>class</span><span>.</span><span>getClassLoader</span><span>(</span><span>)</span><span>.</span><span>getResource</span><span>(</span><span>\"dir\"</span><span>)</span><span>;</span>\n<span>File</span><span>[</span><span>]</span> langFiles <span>=</span> <span>new</span> <span>File</span><span>(</span>dirUrl<span>.</span><span>getPath</span><span>(</span><span>)</span><span>)</span><span>.</span><span>listFiles</span><span>(</span><span>)</span><span>;</span>\n\n<span>for</span> <span>(</span><span>File</span> f <span>:</span> langFiles<span>)</span> <span>{</span>\n  <span>System</span><span>.</span>out<span>.</span><span>println</span><span>(</span>f<span>.</span><span>getName</span><span>(</span><span>)</span><span>)</span><span>;</span>\n<span>}</span>\n</code></pre></div>\n<p>例外はfor文の書き出しのところで起きている。\nつまりlangPathsがnullとなっている。</p>\n<p>この時、<code>dirUrl</code>は下記のようになっていた。</p>\n<div><pre><code class=\"language-bash\"><span>&#x3C;</span>プロジェクトルート<span>></span>/build/install/<span>&#x3C;</span>プログラム名<span>></span>/lib/<span>&#x3C;</span>プログラム名<span>></span>.jar<span>!</span>/dir\n</code></pre></div>\n<p>つまり、jarファイル内のdirフォルダを読み込むのに失敗している。</p>\n<p><code>gradle run</code>した場合は下記のようになっていた。</p>\n<blockquote>\n<p>&#x3C;プロジェクトルート>/build/resources/main/dir</p>\n</blockquote>\n<p>jarファイル内のファイルを読み込むのは簡単だが、フォルダを読み込むのは難しい。</p>\n<p><a href=\"http://stackoverflow.com/questions/11012819/how-can-i-get-a-resource-folder-from-inside-my-jar-file\">http://stackoverflow.com/questions/11012819/how-can-i-get-a-resource-folder-from-inside-my-jar-file</a></p>\n<p>これをなるべくコードは汚さず、runでもjarからでも動くようにしたい。</p>\n<p>jarの外に、jar内にあるリソースファイルと同じもののシンボリックリンクを作り、それを読み込むことにした。\n冗長だし、libフォルダの中に作ることになるので気持ち悪いが、一番コードを汚さず手軽な方法だと思う。</p>\n<p>まず、</p>\n<div><pre><code class=\"language-java\"><span>URL</span> dirUrl <span>=</span> <span>WordReader</span><span>.</span><span>class</span><span>.</span><span>getClassLoader</span><span>(</span><span>)</span><span>.</span><span>getResource</span><span>(</span><span>\"dir\"</span><span>)</span><span>;</span>\n</code></pre></div>\n<p>としていたところを、</p>\n<div><pre><code class=\"language-java\"><span>URL</span> dirUrl <span>=</span> <span>WordReader</span><span>.</span><span>class</span><span>.</span><span>getClassLoader</span><span>(</span><span>)</span><span>.</span><span>getResource</span><span>(</span><span>\"./dir\"</span><span>)</span><span>;</span>\n</code></pre></div>\n<p>とする。これで、jarからだと、</p>\n<blockquote>\n<p>&#x3C;プロジェクトルート>/build/install/&#x3C;プログラム名>/lib/dir</p>\n</blockquote>\n<p>を読み込もうとし、runからだと前述と変わらないパスを読み込もうとする。</p>\n<p>そして以下のコマンドを実行する。</p>\n<div><pre><code class=\"language-sh\">% ./gradlew clean installDist\n% <span>ln</span> <span>-s</span> <span><span>`</span><span>pwd</span><span>`</span></span>/build/resources/main/* build/install/プログラム名/lib/\n</code></pre></div>\n<p>installDistを実行した時には build/resourcesという、ソースにあるリソースのコピーが作成される。\nその中にある全てのシンボリックリンクをlibフォルダ内に作っている。</p>\n<p>あとは前述の、生成された起動スクリプトを実行すれば動くはず。</p>\n<h2>まとめ</h2>\n<p>メモリをケチってやることでもない。</p>\n","textFormat":0,"sourceFileAbsolutePath":"/home/runner/work/website/website/blog/gradle-wrapper.md","outputPath":"blog/gradle-wrapper","title":"Gradle Wrapperを経由せずに実行する","createdAt":"2016-02-07","language":"ja"},{"id":"helvetica-neue","contentHtml":"<h2>まえがき</h2>\n<p>先日、動画アプリを作った。</p>\n<p><img src=\"/images/randomtube-screenshot.jpg\" alt=\"randomtube-screenshot.jpg\"></p>\n<p>シークバーは上のように、左右に経過時間と合計時間がそれぞれ表示されるようになっている。\n経過時間（左時間ラベル）の最大幅はその動画の合計時間の幅にしていて、\n例えば 1:23:45 の動画なら 現在時刻が 0:00 だとしても 1:23:45 の幅を維持されるようになる。</p>\n<p>なぜ時間幅を単純に Auto Layout で指定しないのかというと、\nもし経過時間によってラベル幅が動的に変わってしまうと、シークバーの幅も変わり、\nつまみを動かしている時につまみがガタガタ動いてしまって目的の位置までスライドできないからだ。</p>\n<h2>問題</h2>\n<p>iOS9になってから、この左の経過時間ラベルの表示がおかしくなった。</p>\n<p>例えば「1:23」という表示が「1:...」のように省略されるようになってしまった。</p>\n<h2>原因</h2>\n<p>これは、iOS 8 までで使われていた Helvetica Neue で通用していた経過時間の最大幅の決定方法が、\niOS 9から新たにシステムフォントとなった San Francisco では通用しなくなったのが原因だ。</p>\n<p>Helvetica Neue はプロポーショナルフォントだが、数値だけは等幅だ。\nその為、例えば1:23:45の最大幅を決める為に、どの文字が一番大きいかなど考える必要がなく、\n単に1:23:45を最大幅と考えることが出来た。</p>\n<p>一方 San Francisco では、数値もプロポーショナルフォントとなっている。\nしかも、サイズと太さの組み合わせによって、0が一番大きかったり8が一番大きかったりする。</p>\n<p>その為、もし0が一番大きい場合、合計時間が 1:23:45 なら 00:00:00 の文字幅を取れば良い。</p>\n<p>そもそも San Francisco ほどに違わないとしても、数値がプロポーショナルフォントというのは\n全く珍しくない。デザイン重視のAppleが一般ユーザーの目に触れるフォントとして採用していた\nフォントが等幅だった方が変だったと思う。</p>\n<p>でも無印Helveticaでさえ1だけは幅が狭いので、あえて等幅が選ばれた理由は何かあるっぽい。</p>\n<h2>解決方法</h2>\n<ol>\n<li>\n<p>Helvetica Neueにする</p>\n<p>一番楽な解決方法。</p>\n<p>でも一般ユーザーの目に触れるものを等幅にしたくない。\nまた、San Franciscoは時間を表す時に使う「:」の位置も前後の文字によって動的に変わったりと、表示の美しさにこだわってるのでなるべくそっちを使いたい。</p>\n<p>なので却下。</p>\n</li>\n<li>\n<p>San Franciscoの等幅モードを使う</p>\n<p><code>UIFont</code> には <code>+ monospacedDigitSystemFontOfSize:weight:</code> というメソッドがあり、San Francisco でも等幅になる。</p>\n<p>ただ、太さによっては<a href=\"https://forums.developer.apple.com/thread/19671\">このメソッドが効かないとかいう話</a>があったりするし、\nIBの設定だけで有効には出来ないし、アルファベットまで等幅になるし、そもそも等幅は嫌だしで却下。</p>\n</li>\n<li>\n<p>一番幅広の文字をあらかじめ調べてハードコーディングしておく</p>\n<p>柔軟性は無いが、フォントサイズがあらかじめ分かっていて、そのフォントが動的に変わるわけでなければこれで十分。</p>\n<p>今回はこれにした。</p>\n</li>\n<li>\n<p>サイズと太さによって数値文字の幅を動的に決定する</p>\n<p><code>NSString</code>の<code>- sizeWithAttributes:</code>で一番幅広の文字を探しておき、それを使う。</p>\n<p>多少のコードが必要になるがフォントの変更に柔軟に対応できる。</p>\n</li>\n</ol>\n","textFormat":0,"sourceFileAbsolutePath":"/home/runner/work/website/website/blog/helvetica-neue.md","outputPath":"blog/helvetica-neue","title":"Helvetica Neueは数値が等幅","createdAt":"2016-02-03","language":"ja"},{"id":"current-shell-name","contentHtml":"<h2>まえがき</h2>\n<p>去年の12月、Facebookの<a href=\"https://github.com/facebook/infer\">Infer</a>がHomebrewに追加されたことを知った。</p>\n<p><a href=\"https://github.com/Homebrew/homebrew/commits/master/Library/Formula/infer.rb\">https://github.com/Homebrew/homebrew/commits/master/Library/Formula/infer.rb</a></p>\n<p>InferはOCamlで書かれているが、そのバージョン指定が厳しくてHomebrewになかなか出せないとかいう話があった。</p>\n<p>Facebookは最初、ビルド済みのバイナリを公開してくれていて、Homebrew-caskの方ではそれが使われていた。\nHomebrewでも同じくバイナリを使ったサポートをしようとしてたけど、バイナリがいつの間にか消されててできなくなっていた。</p>\n<p><a href=\"https://github.com/Homebrew/homebrew/pull/40597\">https://github.com/Homebrew/homebrew/pull/40597</a></p>\n<p>その時自分は、じゃあ自分でビルドしようと思い、OCamlを入れてみた。</p>\n<p>opamの起動スクリプトは各シェル用のものがあった。\n何もしてないとインストール時にその読み込み設定がログインシェルの.*shrcに書かれる。\n自分の場合は.zshrcに以下が書かれた。</p>\n<div><pre><code class=\"language-sh\"><span>.</span> /Users/ユーザー名/.opam/opam-init/init.zsh <span>></span> /dev/null <span><span>2</span>></span> /dev/null <span>||</span> <span>true</span>\n</code></pre></div>\n<p>また、<code>~/.opam/opam-init/</code>には他にも</p>\n<ul>\n<li>init.fish</li>\n<li>init.sh</li>\n<li>init.zsh</li>\n<li>init.csh</li>\n</ul>\n<p>があった。(bashはない。)\n各シェルの.*shrcにこれらを書いてもいいけど設定が分散するのは嫌だ。\nなので実行中のシェル名を見てこれらを分ける処理を共通の.shrcに書きたい。\nそこで現在実行中のシェル名が欲しくなった。</p>\n<h2>案1: <code>echo $0</code></h2>\n<ul>\n<li>実行中スクリプトのパス。</li>\n<li>シェル名が表示されるのはシェルと対話中の時だけ</li>\n<li>fish-shellやcsh、tcshでは$0は設定されてない</li>\n</ul>\n<h2>案2: <code>ps -p $$ -oargs= | sed -e 's:^.*/::g'</code></h2>\n<h3>内訳</h3>\n<ul>\n<li>\n<p>$$は現在のプロセス名</p>\n</li>\n<li>\n<p>sedで不要な出力を無文字に置換で削除</p>\n<p>sedでは普通、<code>s/パターン/置換文字/m</code>のようにスラッシュ区切りで使われるが、今回扱う文字にはパスが含まれる為<code>:</code>を使う。\nこの場合は一番下の行の最初から一番最後のスラッシュまでを削除する。</p>\n</li>\n<li>\n<p>oargsはocommとすることも出来る</p>\n</li>\n</ul>\n<h3>問題点</h3>\n<ul>\n<li>$$はfish-shellでは使えない</li>\n<li>csh や tcsh ではプロセス名がそれぞれ <code>-sh</code> と <code>-csh</code> となり、先頭の文字が消されてしまう。\nハイフンが付いてるだけならまだしも、全く別のシェルとして表示されるのは困る。おそらくバグ。\n<code>-</code>を<code>t</code>に置換すれば可能だがそういう場当たり的対処は後で修正された時が面倒。</li>\n</ul>\n<h2>案3: <code>ps -p %self -oargs= | sed -e 's:^.*/::g'</code></h2>\n<ul>\n<li><code>%self</code>はfish-shellでしか使えない</li>\n</ul>\n<h2>案4: <code>echo $SHELL | sed -e 's:^.*/::g'</code></h2>\n<ul>\n<li>cshやtcshでは使えない</li>\n<li>シェルのネストに対応できない</li>\n</ul>\n<h2>案5: <code>echo $shell</code></h2>\n<ul>\n<li>cshやtcsh以外では使えない</li>\n<li>cshでもtcshになる。OSXの/bin/cshは/bin/tcshを呼び出してるので当然だが。</li>\n</ul>\n<p>以上から、1つのコードでsh、bash、zsh、fish、csh、tcshシェルを判定したい。\nしかしcsh系とその他では以下if文とエラー出力の無視という点が他と異なるので無理と判断。\ncshとtcshは諦めた。sh、bash、zshでこんな感じにして妥協しようか。</p>\n<div><pre><code class=\"language-bash\"><span>shellName</span><span>=</span><span><span>$(</span><span>ps</span> <span>-p</span> $$ <span>-oargs</span><span>=</span> <span><span>2</span>></span> /dev/null<span>)</span></span>\n<span>if</span> <span>[</span> <span>-z</span> <span>\"<span>$shellName</span>\"</span> <span>]</span><span>;</span> <span>then</span><span>;</span>\n  <span>shellName</span><span>=</span><span><span>$(</span><span>ps</span> <span>-p</span> %self <span>-oargs</span><span>=</span><span>)</span></span> <span>#fish-shell用</span>\n<span>fi</span>\n<span>shellName</span><span>=</span><span><span>$(</span><span>echo</span> $shellName <span>|</span> <span>sed</span> <span>-e</span> <span>'s:^.*/::g'</span><span>)</span></span>\n\n<span>echo</span> <span>\"シェル名: <span>$shellName</span>\"</span>\n</code></pre></div>\n<p>なんか小汚いしどうでも良くなってきた。今は<code>.*shrc</code>へそれぞれ書いてる。でも何か方法は無いだろうか。</p>\n<p>参考:</p>\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/3327013/how-to-determine-the-current-shell-im-working-on\">http://stackoverflow.com/questions/3327013/how-to-determine-the-current-shell-im-working-on</a></li>\n</ul>\n","textFormat":0,"sourceFileAbsolutePath":"/home/runner/work/website/website/blog/current-shell-name.md","outputPath":"blog/current-shell-name","title":"実行中のシェル名の確認方法を考える","createdAt":"2016-02-02","language":"ja"},{"id":"ios-and-mpeg-dash","contentHtml":"<p>The other day, I created a YouTube app for iOS.\nAnd I tried to get my app to play 1080p videos from YouTube.\nBut it was not easy.</p>\n<p>YouTube does not provide 1080p or higher resolution videos in the HLS format.\nCurrently, They only provide it in the MPEG-DASH format.\nBut iOS does not support MPEG-DASH, only HLS.</p>\n<p>I tried to find a third party library. But I couldn't find any good ones.</p>\n<p>So I sent a feature request to enable support from MPEG-DASH to Apple a year ago.\nAnd finally, I got the answer from them yesterday.</p>\n<div><pre><code class=\"language-none\">Hi Manabu,\nThis is a courtesy email regarding Bug ID# 19279150.\nEngineering has the following feedback for you:\nWe checked with YouTube and this was their response:\n“If the content is available in 1080p in DASH, it should be available in 1080p in HLS, both in the YouTube native app, and also via the HLS experiment Safari”\nSo, this is something we have no plans to address as the entire YouTube DASH-encoded catalog is also available on iOS.\nWe are now closing this bug report.</code></pre></div>\n<p>But actually, It looks like 1080p videos in the HLS are not available.</p>\n<p>It probably means YouTube is preparing for 1080p HLS videos now.\nI hope that day will soon come.</p>\n","textFormat":0,"sourceFileAbsolutePath":"/home/runner/work/website/website/blog/ios-and-mpeg-dash.md","outputPath":"blog/ios-and-mpeg-dash","title":"iOS and MPEG-DASH","createdAt":"2015-11-01","language":"en"},{"id":"first-post","contentHtml":"<p>テスト投稿 - 本文</p>\n<h3>Scala</h3>\n<div><pre><code class=\"language-scala\"><span>def</span> hasA<span>(</span>s<span>:</span><span>String</span><span>)</span><span>:</span><span>Boolean</span> <span>=</span> <span>{</span>\n  <span>for</span><span>(</span>i <span>&#x3C;-</span> <span>0</span> until s<span>.</span>length<span>)</span> <span>{</span>\n    <span>if</span><span>(</span>s<span>(</span>i<span>)</span> <span>==</span> <span>'a'</span><span>)</span> <span>return</span> <span>true</span>\n  <span>}</span>\n  <span>return</span> <span>false</span>\n<span>}</span>\n</code></pre></div>\n","textFormat":0,"sourceFileAbsolutePath":"/home/runner/work/website/website/blog/first-post.md","outputPath":"blog/first-post","title":"テスト投稿","createdAt":"2015-10-26","language":"ja"}]},"__N_SSG":true}